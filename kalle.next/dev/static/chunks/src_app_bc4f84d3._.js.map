{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 9, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///Users/isabellevedenbrantfatouros/Documents/GitHub/work-test-web/src/app/ReactRoot.jsx"],"sourcesContent":["import { observer } from \"mobx-react-lite\"; \nimport { Filter } from \"./filterPresenter.jsx\";\nimport { SidebarFilter } from \"./presenters/sidebarFilterPresenter.jsx\";\nimport { TopbarFilter } from \"./presenters/topbarFilterPresenter.jsx\";\nimport { SuspenseView } from \"/src/app/views/suspenseView.jsx\";\n\nexport const ReactRoot = observer(\n    function ReactRoot(props){\n        if (!props.model.ready){\n            return <div> \n                <SuspenseView promise={\"\"} model={props.model}/>\n            </div>\n        }\n        \n        return (\n            <div className=\"flexParent\">\n                <div className=\"sideBarFilter\">\n                    <SidebarFilter model={props.model} />\n                </div>\n                <div className=\"topBarFilter\">\n                    <TopbarFilter model={props.model} />\n                </div>\n                <div className=\"mainContent\">\n                    <Filter model={props.model} />\n                </div>\n            </div>\n        );\n    }     \n)"],"names":[],"mappings":";;;;;;;;;;;;;;;AAEA;AACA;;;;;;;;;;;;AAGO,MAAM,YAAY,cACrB,SAAS,UAAU,KAAK;IACpB,IAAI,CAAC,MAAM,KAAK,CAAC,KAAK,EAAC;QACnB,qBAAO,6LAAC;sBACJ,cAAA,6LAAC;gBAAa,SAAS;gBAAI,OAAO,MAAM,KAAK;;;;;;;;;;;IAErD;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC,uKAAa;oBAAC,OAAO,MAAM,KAAK;;;;;;;;;;;0BAErC,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC,qKAAY;oBAAC,OAAO,MAAM,KAAK;;;;;;;;;;;0BAEpC,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAO,OAAO,MAAM,KAAK;;;;;;;;;;;;;;;;;AAI1C"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///Users/isabellevedenbrantfatouros/Documents/GitHub/work-test-web/src/app/resolvePromise.js"],"sourcesContent":["export function resolvePromise(prms, promiseState){\n    console.log(\"Resolving promise:\", prms);\n    console.log(\"With promise state:\", promiseState);\n\n    promiseState.promise= prms;\n    promiseState.data= null;\n    promiseState.error= null;\n\n    function saveDataACB(promiseResult){\n        console.log(promiseResult);\n        if(promiseState.promise === prms){\n            promiseState.data = promiseResult;\n        };\n    };\n\n    function errorACB(promise){\n        console.log(promise);\n        console.log(prms);\n        console.log(promiseState);\n        if(promiseState.promise===prms){\n            promiseState.error = promise;\n        };\n    };\n\n    if(prms){\n        prms.then(saveDataACB).catch(errorACB);\n    };\n};"],"names":[],"mappings":";;;;AAAO,SAAS,eAAe,IAAI,EAAE,YAAY;IAC7C,QAAQ,GAAG,CAAC,sBAAsB;IAClC,QAAQ,GAAG,CAAC,uBAAuB;IAEnC,aAAa,OAAO,GAAE;IACtB,aAAa,IAAI,GAAE;IACnB,aAAa,KAAK,GAAE;IAEpB,SAAS,YAAY,aAAa;QAC9B,QAAQ,GAAG,CAAC;QACZ,IAAG,aAAa,OAAO,KAAK,MAAK;YAC7B,aAAa,IAAI,GAAG;QACxB;;IACJ;;IAEA,SAAS,SAAS,OAAO;QACrB,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC;QACZ,IAAG,aAAa,OAAO,KAAG,MAAK;YAC3B,aAAa,KAAK,GAAG;QACzB;;IACJ;;IAEA,IAAG,MAAK;QACJ,KAAK,IAAI,CAAC,aAAa,KAAK,CAAC;IACjC;;AACJ"}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///Users/isabellevedenbrantfatouros/Documents/GitHub/work-test-web/src/app/api/apiConfig.js"],"sourcesContent":["export const API_URL = \"https://work-test-web-2024-eze6j4scpq-lz.a.run.app/api\";"],"names":[],"mappings":";;;;AAAO,MAAM,UAAU"}},
    {"offset": {"line": 177, "column": 0}, "map": {"version":3,"sources":["file:///Users/isabellevedenbrantfatouros/Documents/GitHub/work-test-web/src/app/api/restaurantSource.js"],"sourcesContent":["import { API_URL } from \"./apiConfig\"\n\nexport function getDataFromApi( apiEndpoint){\n    function gotResponseACB(response){\n        if (response.status === 200){ \n            return response.json();\n        } else {\n            throw Error;};\n    };\n\n    function getResultsACB(json){\n        return json.results;\n    };\n\n    return fetch(`${ API_URL }`+`${ apiEndpoint }`).then(gotResponseACB).then(getResultsACB);\n};"],"names":[],"mappings":";;;;AAAA;;AAEO,SAAS,eAAgB,WAAW;IACvC,SAAS,eAAe,QAAQ;QAC5B,IAAI,SAAS,MAAM,KAAK,KAAI;YACxB,OAAO,SAAS,IAAI;QACxB,OAAO;YACH,MAAM;QAAM;;IACpB;;IAEA,SAAS,cAAc,IAAI;QACvB,OAAO,KAAK,OAAO;IACvB;;IAEA,OAAO,MAAM,GAAI,4IAAO,EAAG,GAAC,GAAI,aAAc,EAAE,IAAI,CAAC,gBAAgB,IAAI,CAAC;AAC9E"}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///Users/isabellevedenbrantfatouros/Documents/GitHub/work-test-web/src/app/RestaurantModel.js"],"sourcesContent":["import { resolvePromise } from \"./resolvePromise\";\nimport { getDataFromApi } from \"./api/restaurantSource\";\n\nexport const model = {\n    user: undefined,\n    ready: false,\n    restaurants: [],\n    filters: [],\n    filtersApplied: [],\n\n\n    setUser(user){\n        this.user = user\n    },\n\n    setReady(value){\n        this.ready = value\n    },\n\n    getRestaurants(){\n        return this.restaurants\n    },\n\n    getFilters(){\n        return this.filters\n    },\n\n    getFiltersApplied(){\n        return this.filtersApplied\n    },\n\n    doFilter(filterIds){\n        this.filtersApplied = filterIds;\n        this.resolveRestaurantsPromise();\n    },\n};\n\n/*\none restaurant object structure:\n{\n  \"id\": \"string\",\n  \"name\": \"string\",\n  \"rating\": \"number\",\n  \"filter_ids\": [\n    \"string\"\n  ],\n  \"image_url\": \"string\",\n  \"delivery_time_minutes\": \"number\",\n  \"price_range_id\": \"string\"\n}\n*/"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,MAAM,QAAQ;IACjB,MAAM;IACN,OAAO;IACP,aAAa,EAAE;IACf,SAAS,EAAE;IACX,gBAAgB,EAAE;IAGlB,SAAQ,IAAI;QACR,IAAI,CAAC,IAAI,GAAG;IAChB;IAEA,UAAS,KAAK;QACV,IAAI,CAAC,KAAK,GAAG;IACjB;IAEA;QACI,OAAO,IAAI,CAAC,WAAW;IAC3B;IAEA;QACI,OAAO,IAAI,CAAC,OAAO;IACvB;IAEA;QACI,OAAO,IAAI,CAAC,cAAc;IAC9B;IAEA,UAAS,SAAS;QACd,IAAI,CAAC,cAAc,GAAG;QACtB,IAAI,CAAC,yBAAyB;IAClC;AACJ,GAEA;;;;;;;;;;;;;AAaA"}},
    {"offset": {"line": 261, "column": 0}, "map": {"version":3,"sources":["file:///Users/isabellevedenbrantfatouros/Documents/GitHub/work-test-web/src/app/firebase/firestoreModel.js"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport { getFirestore, doc, setDoc, getDoc, deleteField } from \"firebase/firestore\";\nimport { firebaseConfig } from \"/src/firebaseConfig.js\";\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\n\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nconst db = getFirestore(app);\nwindow.db = db\nwindow.doc = doc\nwindow.setDoc = setDoc\nconst COLLECTION = \"restaurants\";\n\nexport function connectToPersistence(reactiveModel, watchFunction) {\n    let stopWatching = null;\n\n    onAuthStateChanged(auth,\n        function logInOrOutACB(user) {\n            reactiveModel.setUser(user);\n            // LOGOUT\n            if (!user) {\n                if (stopWatching) {\n                    stopWatching();\n                    stopWatching = null;\n                }\n                reactiveModel.sounds = []; // sätt in restauranger\n                reactiveModel.setReady(true);\n                return;\n            };\n\n            // LOGIN\n            reactiveModel.setReady(false);\n            console.log(\"reading persistence for\", user.uid);\n            const docReference = doc(db, COLLECTION, user.uid);\n            getDoc(docReference).then(handleSnapShotACB).catch(handleGetErrorACB);\n        });\n\n    function handleSnapShotACB(snapshot) {\n        const data = snapshot.data();\n        if (!data) {\n            reactiveModel.restaurants = []; // sätt in fler värden \n        } else {\n            reactiveModel.restaurants = data.restaurants ?? [];\n        };\n        reactiveModel.setReady(true);\n        console.log(\"Model ready set to true (after snapshot)\"); //debug\n\n        if (stopWatching) {\n            stopWatching();\n        }\n        stopWatching = watchFunction(checkModelPropertiesACB, giveDataToFireBaseACB);\n    };\n\n    function handleGetErrorACB() {\n        console.log(\"Error getting snapshot:\", error);\n        reactiveModel.sounds = [];\n        reactiveModel.setCurrentSoundId(null);\n        reactiveModel.soundboardConfig = [[]];\n        reactiveModel.setEditMode(false);\n        reactiveModel.setReady(true);\n        console.log(\"Model ready set to true (after error)\");\n    };\n\n    function checkModelPropertiesACB() {\n        return [reactiveModel.currentSoundId, reactiveModel.sounds, reactiveModel.soundboardConfig, reactiveModel.columnNames, reactiveModel.hasSeenWelcomePopup, reactiveModel.soundSettings]\n    };\n\n    async function giveDataToFireBaseACB() {\n        if (!reactiveModel.ready || !reactiveModel.user) {\n            return;\n        };\n        const docReference = doc(db, COLLECTION, reactiveModel.user.uid);\n\n        // Serialize soundboardConfig from nested array to flat object for Firestore\n        const soundboardConfigFlat = {};\n        reactiveModel.soundboardConfig.forEach((col, idx) => {\n            soundboardConfigFlat[idx] = col;\n        });\n\n        try {\n            const snapshot = await getDoc(docReference);\n            const existingData = snapshot.data();\n            \n            if (existingData?.soundboardConfigFlat) {\n                const existingIndices = Object.keys(existingData.soundboardConfigFlat);\n                const currentIndices = new Set(Object.keys(soundboardConfigFlat));\n                existingIndices.forEach(idx => {\n                    if (!currentIndices.has(idx)) {\n                        soundboardConfigFlat[idx] = deleteField();\n                    }\n                });\n            }\n        } catch (error) {console.log(\"Error reading existing data:\", error);}\n\n        const data = {\n            currentSoundId: reactiveModel.currentSoundId,\n            sounds: reactiveModel.sounds,\n            soundboardConfigFlat: soundboardConfigFlat,\n            columnNames: reactiveModel.columnNames,\n            hasSeenWelcomePopup: reactiveModel.hasSeenWelcomePopup,\n            soundSettings: reactiveModel.soundSettings\n        };\n        console.log(\"Saving to Firestore:\", data); // debug\n        return setDoc(docReference, data, { merge: true });\n    };\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 398, "column": 0}, "map": {"version":3,"sources":["file:///Users/isabellevedenbrantfatouros/Documents/GitHub/work-test-web/src/app/mobxReactiveModel.js"],"sourcesContent":["import {model} from \"./RestaurantModel\";\nimport { connectToPersistence } from \"./firebase/firestoreModel\";\nimport { observable, configure, reaction } from \"mobx\";\n\nexport const reactiveModel= observable(model);\n\nwindow.myModel= reactiveModel;\nconfigure({ enforceActions: \"always\" });\n\nfunction checkIdStateACB(){\n    return reactiveModel.filtersApplied;\n}\n\nfunction resolvingDishPromiseACB(){\n    return reactiveModel.currentDishEffect();\n};\n\nmyModel.doFilter({});\n\nconnectToPersistence(reactiveModel, reaction);\n\nreaction(checkIdStateACB, resolvingDishPromiseACB);"],"names":[],"mappings":";;;;AAAA;AACA;;;;;;;;;AAGO,MAAM,gBAAe,WAAW,yIAAK;AAE5C,OAAO,OAAO,GAAE;AAChB,UAAU;IAAE,gBAAgB;AAAS;AAErC,SAAS;IACL,OAAO,cAAc,cAAc;AACvC;AAEA,SAAS;IACL,OAAO,cAAc,iBAAiB;AAC1C;;AAEA,QAAQ,QAAQ,CAAC,CAAC;AAElB,IAAA,mKAAoB,EAAC,eAAe;AAEpC,SAAS,iBAAiB"}},
    {"offset": {"line": 434, "column": 0}, "map": {"version":3,"sources":["file:///Users/isabellevedenbrantfatouros/Documents/GitHub/work-test-web/src/app/page.jsx"],"sourcesContent":["\"use client\";\n\nimport { ReactRoot } from \"./ReactRoot.jsx\";\nimport { reactiveModel } from \"./mobxReactiveModel.js\";\n\nexport default function Home() {\n  return <ReactRoot model={reactiveModel} />;\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,qBAAO,6LAAC,wIAAS;QAAC,OAAO,mJAAa;;;;;;AACxC;KAFwB"}}]
}